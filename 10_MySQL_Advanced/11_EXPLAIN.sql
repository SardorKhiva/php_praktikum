# `EXPLAIN` ‚Äî —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –≤ MySQL –∏ –¥—Ä—É–≥–∏—Ö –°–£–ë–î, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å. –û–Ω–∞ –ø–æ–º–æ–≥–∞–µ—Ç **–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å** SQL-–∑–∞–ø—Ä–æ—Å—ã, –ø–æ–∫–∞–∑—ã–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–ª–∞–Ω–∞—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### üìå **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `EXPLAIN`?**
# –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å `EXPLAIN` –ø–µ—Ä–µ–¥ `SELECT`:
EXPLAIN
SELECT *
FROM `teachers`
WHERE `last_name` = '–ò–≤–∞–Ω–æ–≤';

### üîç **–ß—Ç–æ –ø–æ–∫–∞–∂–µ—Ç `EXPLAIN`?**
# `EXPLAIN` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
/*
| –ü–æ–ª–µ        | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|
| `id`        | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ (–æ–±—ã—á–Ω–æ 1, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –ø—Ä–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞—Ö). |
| `select_type` | –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞ (`SIMPLE`, `SUBQUERY`, `JOIN`, `DERIVED` –∏ —Ç. –¥.). |
| `table`     | –¢–∞–±–ª–∏—Ü–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —ç—Ç–æ—Ç —à–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. |
| `type`      | –°–ø–æ—Å–æ–± —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã (`ALL`, `INDEX`, `RANGE`, `REF`, `EQ_REF`, `CONST`, `SYSTEM`). –ß–µ–º –ª—É—á—à–µ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ (`ALL` ‚Äî –º–µ–¥–ª–µ–Ω–Ω–æ, `CONST` ‚Äî –±—ã—Å—Ç—Ä–æ). |
| `possible_keys` | –ö–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã. |
| `key`       | –ö–∞–∫–æ–π –∏–Ω–¥–µ–∫—Å —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω. |
| `key_len`   | –î–ª–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞. |
| `ref`       | –ö–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∏–Ω–¥–µ–∫—Å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞. |
| `rows`      | –û—Ü–µ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã—Ö —Å—Ç—Ä–æ–∫. |
| `Extra`     | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Using index`, `Using temporary`, `Using filesort`). |
*/


### üî• **–ü—Ä–∏–º–µ—Ä 1: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞**
EXPLAIN
SELECT *
FROM `students`
WHERE `name` = '–ê–ª–µ–∫—Å–µ–π';

/* **–í—ã—Ö–æ–¥:**
- `type = ALL` (–ø–æ–ª–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã ‚Äî –ø–ª–æ—Ö–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö).
- `possible_keys = NULL` (–∏–Ω–¥–µ–∫—Å—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è).
*/

# üí° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å:
ALTER TABLE `students`
    ADD INDEX `idx_name` (`name`);


### üöÄ **–ü—Ä–∏–º–µ—Ä 2: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å –∏–Ω–¥–µ–∫—Å–æ–º**
EXPLAIN
SELECT *
FROM `students`
WHERE `id` = 5;

/* **–í—ã—Ö–æ–¥:**
- `type = CONST` (–æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫, —Ç. –∫. `id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á).
- `key = PRIMARY` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å).
*/


### üõ† **–ü—Ä–∏–º–µ—Ä 3: JOIN (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü)**
EXPLAIN
SELECT `teachers`.`first_name`, `rooms`.`room_number`
FROM `teachers`
         JOIN `rooms` ON `teachers`.`id` = `rooms`.`teacher_id`;

/* **–í—ã—Ö–æ–¥:**
- `type = ALL` (–µ—Å–ª–∏ –Ω–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤, —Ç–æ –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ).
- `type = REF` (–µ—Å–ª–∏ –µ—Å—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ `rooms.teacher_id`, —Ç–æ –±—ã—Å—Ç—Ä–µ–µ).
*/

# üí° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ `rooms.teacher_id`:
ALTER TABLE `rooms`
    ADD INDEX `idx_teacher` (`teacher_id`);

/*  üßê **–í—ã–≤–æ–¥**
- `EXPLAIN` –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫ MySQL –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã.
- –ò—Å–ø–æ–ª—å–∑—É–π –∏–Ω–¥–µ–∫—Å—ã, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –≤—ã–±–æ—Ä–∫—É (`type = ALL` ‚Äî –ø–ª–æ—Ö–æ, `type = REF` –∏–ª–∏ `CONST` ‚Äî —Ö–æ—Ä–æ—à–æ).
- –°—Ç–∞—Ä–∞–π—Å—è –∏–∑–±–µ–≥–∞—Ç—å `Using temporary` –∏ `Using filesort`, –æ–Ω–∏ –∑–∞–º–µ–¥–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.
*/